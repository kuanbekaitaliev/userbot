# Шаблон Aiogram 3.1.1

Это современный шаблон для Telegram-бота, построенный на Aiogram 3.1.1, с поддержкой асинхронных баз данных, интернационализацией (i18n) и развертыванием через Docker. Шаблон предоставляет надежную основу для создания масштабируемых и поддерживаемых ботов с чистой архитектурой.

## Особенности

- Aiogram 3.1.1: Последняя стабильная версия фреймворка для Telegram-ботов.
- Поддержка баз данных:
- SQLAlchemy: ORM для работы с запросами и миграциями.
  - Asyncpg: Асинхронный драйвер для PostgreSQL.
  - Aiosqlite: Асинхронный драйвер для SQLite (по умолчанию для локальной разработки).
- Alembic: Управление миграциями базы данных.
- Babel: Поддержка интернационализации (i18n) и локализации.
- Docker: Контейнеризация с помощью Dockerfile и docker-compose.yml.
- Модульная структура: Организованные обработчики, фильтры, клавиатуры и middleware.

## Требования

- Python: 3.8 или выше
- Docker: Установлен для развертывания в контейнерах (опционально для локальной разработки)
- Git: Для клонирования репозитория

## Структура проекта

```
./
├── Dockerfile              # Конфигурация для сборки Docker-образа приложения
├── LICENSE                 # Файл с лицензией проекта
├── README.md               # Документация: описание проекта, инструкции по установке и запуску
├── docker-compose.yml      # Конфигурация для запуска приложения и зависимостей через Docker Compose
├── requirements.txt        # Список Python-зависимостей для установки через pip
├── run.sh                  # Скрипт для запуска приложения (например, миграции + запуск бота)
└── src/                    # Основная директория с исходным кодом приложения
    ├── __init__.py         # Пустой файл, делающий src Python-пакетом
    ├── alembic.ini         # Конфигурация Alembic для миграций базы данных
    ├── config/             # Модуль для хранения настроек приложения
    │   ├── __init__.py     # Инициализация модуля config
    │   ├── const.py        # Константы (например, тексты сообщений, коды ошибок)
    │   └── settings.py     # Основные настройки (токен бота, URL базы данных и т.д.)
    ├── database/           # Модуль для работы с базой данных
    │   ├── __init__.py     # Инициализация модуля database
    │   ├── models.py       # Определение моделей базы данных (SQLAlchemy или другой ORM)
    │   ├── queries.py      # Функции для выполнения запросов к базе данных
    │   └── session.py      # Настройка сессий для работы с базой данных
    ├── filters/            # Пользовательские фильтры для aiogram
    │   ├── __init__.py     # Инициализация модуля filters
    │   └── admin_filter.py # Фильтр для проверки прав администратора
    ├── handlers/           # Обработчики событий (команд и callback-запросов)
    │   ├── __init__.py     # Инициализация модуля handlers
    │   ├── admin/          # Обработчики для админ-функционала
    │   │   ├── __init__.py # Инициализация подмодуля admin
    │   │   └── admin.py    # Логика админ-команд (например, бан, статистика)
    │   └── users/          # Обработчики для пользовательских команд
    │       ├── __init__.py # Инициализация подмодуля users
    │       ├── about.py    # Обработчик команды "О боте"
    │       ├── cancel.py   # Обработчик команды отмены действия
    │       ├── echo.py     # Обработчик для эхо-ответов (повторение текста)
    │       ├── help.py     # Обработчик команды "Помощь"
    │       ├── lang.py     # Обработчик смены языка
    │       ├── menu.py     # Обработчик команды вызова меню
    │       ├── settings.py # Обработчик настроек пользователя
    │       └── start.py    # Обработчик команды /start
    ├── keyboards/          # Модуль для создания клавиатур
    │   ├── __init__.py     # Инициализация модуля keyboards
    │   └── inline/         # Подмодуль для инлайн-клавиатур
    │       ├── __init__.py # Инициализация подмодуля inline
    │       ├── cancel.py   # Клавиатура для отмены действия
    │       ├── lang.py     # Клавиатура для выбора языка
    │       ├── menu.py     # Клавиатура основного меню
    │       └── settings.py # Клавиатура настроек
    ├── main.py             # Точка входа: запуск бота, регистрация роутеров
    ├── middleware/         # Промежуточные обработчики (middleware) для aiogram
    │   ├── __init__.py     # Инициализация модуля middleware
    │   ├── i18n_middleware.py # Middleware для поддержки локализации (i18n)
    │   └── last_action_middleware.py # Middleware для отслеживания последней активности
    ├── migrations/         # Директория для миграций базы данных (Alembic)
    │   ├── README          # Описание миграций или инструкции
    │   ├── env.py          # Настройки окружения для Alembic
    │   └── script.py.mako  # Шаблон для генерации миграций
    ├── services/           # Бизнес-логика приложения (пока пустой)
    │   └── __init__.py     # Инициализация модуля services
    └── utils/              # Вспомогательные утилиты
        ├── __init__.py     # Инициализация модуля utils
        ├── bot_commands.py # Настройка команд бота (например, /start, /help)
        └── notify.py       # Функции для отправки уведомлений
```

## Лицензия

Проект распространяется под лицензией MIT.
